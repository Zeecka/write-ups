# Website

This is the source for <https://bitsforeveryone.com> (also  accessible at <https://bitsforeveryone.github.io>).

This is a static site generated by [Hugo][h] and hosted on [GitHub Pages][g].

[g]:https://pages.github.com/
[h]:https://gohugo.io/

## Quick Start

### Development Server
1. [Install Hugo](https://gohugo.io/getting-started/installing/#quick-install)
2. Ensure you have the git [submodules](#submodules)
3. `hugo server --buildDrafts`

Now you have a development copy of the website at <http://localhost:1313/>. As
you edit content it will automatically be updated.

### Create a Writeup

`hugo new writeup/exampleCTF/pwnable.md`

This will create a file `content/writeup/exampleCTF/pwnable.md` (including
directories), that has a starter [template][tt] for a writeup. *Note: there is
nothing magic about this file could also have been created manually *. The
command just ensures that it has all the necessary metadata and provides a
consistent template.

### Publish to Website

`./deploy.sh`

This will run the following steps.

1. Build the site (`hugo`)
2. Commit the new version to the `public` repository (git submodule)
3. Push the new version to Github (bitsforeveryone.github.io)

Then optionally you should commit in this repository to update the submodule.

## Organization

You can find out more about the organization of a hugo site in the
[documentation][dir]. I will highlight a few files and directories:

[dir]:https://gohugo.io/getting-started/directory-structure/

```
.
├── config.toml 
├── content
│   ├── page
│   │   └── about.md
│   ├── project
│   │   └── grapefruit.md
│   └── writeup
│       ├── csaw_2017
│       │   ├── _index.md
│       │   └── tableEZ.md
│       └── _index.md
├── public
├── static
└── themes
```

[`config.toml`](./config/toml) sets up metadata for the website such as it's
`baseurl` and `title`.  The primary reason you might edit this file it to add a
section to the navigation `menu`. [Additional documentation][conf].

[conf]:https://gohugo.io/getting-started/configuration/

[`content`](./content) contains the actual source of the website pages organized
into sub directories called `sections`. In the above example  [`page`][page],
[`project`][proj], and [`writeup`][w] are all sections. [Additional
documentation][cont].

[page]:./content/page
[proj]:./content/project
[w]:./content/writeup
[cont]:https://gohugo.io/getting-started/directory-structure/

The source for each page on the website is just a plain [Markdown][md] file with
some [`frontmatter`][front] that provides metadata for the page such as `title`,
`type`, and `tags`. In the above example `about.md`, `grapefruit.md`, and
`tableEZ.md` are all pages. Hugo is configured so that it will nicely aggregate
all the pages in a section on a page. So when you visit
<https://bitsforeveryone.com/writeup/> you will see all the pages from that
section. *Note, in order to use nested directories for each CTF each post must
be set as `type: "writeup"`*, however this is easily handled with
[templates][tt].  There is a special type of page named `_index.md` which can be
used to add information at the beginning of a section list page.


[md]:https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet
[front]:https://gohugo.io/content-management/front-matter#readout
[tt]:#templates

[`public`][pub] is the static site generated by running `hugo`. This is what is
served by GitHub.  **This should not be manually edited**. This directory is
actually a [git submodule][gsm] that refers to the [bitsforeveryone/bitsforeveryone.github.io] repository. This is required by GitHub pages. [Additional documentation][ghp]. This directory is automatically updated, committed, and pushed with the `deploy.sh` script (will require permissions on the repository).

[pub]:./public
[io]:https://github.com/bitsforeveryone/bitsforeveryone.github.io
[ghp]:https://gohugo.io/hosting-and-deployment/hosting-on-github/#host-github-user-or-organization-pages
[gsm]:https://git-scm.com/book/en/v2/Git-Tools-Submodules

[`static`](./static) contains custom images such as the logo.  Content based images
like screenshots for write ups  should no be committed to the repository.

[`themes`](./themes) contains the [Beautiful Hugo][bh] as a git submodule.  This
is what determines the look and feel of the website. Portions of this can be
overridden in folders like `archetypes`, and `layouts` to customize the site.
The theme can be easily changed but might require some additional work to
ensure the nested directories work correctly.

[bh]:https://github.com/halogenica/beautifulhugo

## Gotchas

### Blank Response

**Behavior:** When you run `hugo server` and visit the page it is completely
blank. This most likely means you do not have the theme. See
[submodules][#submodules] for how to fix this. Then restart the server.

### Submodules
This repository has git submodules for the theme and in order to publish the
site. Here is how to get setup:

- If you have not yet checked out the repository:
  - `git clone --recursive git@github.com:bitsforeveryone/write-ups.git`
  - note the `--recursive`
- If you already have the repository:
  - `git submodule init`
  - `git submodule update --recursive`
